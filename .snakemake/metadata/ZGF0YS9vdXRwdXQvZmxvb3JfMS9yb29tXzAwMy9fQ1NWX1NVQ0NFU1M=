{"record_format_version": 6, "code": "        import sys, subprocess, csv\n        from pathlib import Path\n        obj_dir = Path(params.obj_dir)\n        out_dir = Path(params.out_dir)\n        out_dir.mkdir(parents=True, exist_ok=True)\n        objs = list(obj_dir.glob(\"*.obj\"))\n        if not objs:\n            header = [\"group_name\",\"class\",\"face_count\",\"area\",\n            with (out_dir / \"planes_report.csv\").open(\"w\", newline=\"\", encoding=\"utf-8\") as f:\n            with (out_dir / \"planes_report.csv\").open(\"w\", newline=\"\", encoding=\"utf-8\") as f:\n            with (out_dir / \"planes_report.csv\").open(\"w\", newline=\"\", encoding=\"utf-8\") as f:\n                csv.writer(f).writerow(header)\n            Path(output.success).parent.mkdir(parents=True, exist_ok=True)\n            Path(output.success).write_text(\"OK\\n\")\n            return\n        obj = objs[0]\n        script = Path(\"py_scripts/room_calculator.py\")\n        cmd = [\n            sys.executable, str(script),\n            \"--obj\", str(obj),\n            \"--outdir\", str(out_dir),              # writes planes_report.csv + out_planes/\n            \"--angle\", str(params.angle),\n            \"--wall_tol_deg\", str(params.wall_tol),\n            \"--floor_tol_deg\", str(params.floor_tol),\n        if params.dist_eps is not None:\n            cmd += [\"--dist_eps\", str(params.dist_eps)]\n        subprocess.check_call(cmd)\n        Path(output.success).parent.mkdir(parents=True, exist_ok=True)\n        Path(output.success).write_text(\"OK\\n\")\n", "rule": "csvs_per_room", "input": ["data/output/floor_1/room_003/_OBJ_SUCCESS"], "log": [], "params": ["'data/output/floor_1/room_003'", "'data/output/floor_1/room_003'", "0.005", "1.0", "10.0", "20.0"], "shellcmd": null, "incomplete": false, "starttime": 1762424376.1938176, "endtime": 1762424376.6519306, "job_hash": 158729997912, "conda_env": null, "software_stack_hash": "d41d8cd98f00b204e9800998ecf8427e", "container_img_url": null, "input_checksums": {"data/output/floor_1/room_003/_OBJ_SUCCESS": "19d8c9921b99c82d78c985136a5e28f6382011641fb6160c0c1a7573a402ea66"}}